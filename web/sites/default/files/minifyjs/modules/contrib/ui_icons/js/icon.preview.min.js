((Drupal,drupalSettings,once)=>{Drupal.Icon={};Drupal.Icon.loadIconPreview=async function(data){try{const iconData=await fetch(Drupal.url('ui-icons/ajax/preview/icons'),{method:'POST',body:JSON.stringify(data),});if(!iconData.ok){console.error('Cannot retrieve icon data!');return}
const iconsPreview=await iconData.json();for(const[iconFullId,iconPreview]of Object.entries(iconsPreview)){if(!data.target_input_label){const iconTarget=document.querySelector(`.icon-preview-load[data-icon-id='${iconFullId}']`,);iconTarget.outerHTML=iconPreview;continue}
const iconTarget=document.querySelector(`.icon-preview-load[value='${iconFullId}']`,);if(!iconTarget){continue}
const iconLabel=document.querySelector(`label[for='${iconTarget.id}']`,);iconLabel.innerHTML=iconPreview}}catch(err){console.error(`Something went wrong! ${err.message}`)}};Drupal.behaviors.IconPreview={attach(context,settings){once('loadIconPreview','body',context).forEach(()=>{if(!settings.ui_icons_preview_data){return}
Drupal.Icon.loadIconPreview(settings.ui_icons_preview_data)})},}})(Drupal,drupalSettings,once)