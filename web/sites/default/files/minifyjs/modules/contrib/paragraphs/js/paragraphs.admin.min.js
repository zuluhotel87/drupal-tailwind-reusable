(function($,Drupal,once){'use strict';var setUpTab=function($parWidget,$parTabs,$parContent,$parBehavior,$mainRegion){var $tabContent=$parTabs.find('.paragraphs_content_tab');var $tabBehavior=$parTabs.find('.paragraphs_behavior_tab');if($tabBehavior.hasClass('is-active')){$parWidget.removeClass('content-active').addClass('behavior-active');$tabContent.removeClass('is-active');$tabContent.find('a').removeClass('is-active');$tabBehavior.addClass('is-active');$tabBehavior.find('a').addClass('is-active')}else{if(!($mainRegion.hasClass('content-active'))&&!($mainRegion.hasClass('behavior-active'))){$tabContent.addClass('is-active');$tabContent.find('a').addClass('is-active');$parWidget.addClass('content-active')}
$parTabs.removeClass('paragraphs-tabs-hide');if($parBehavior.length===0){$parTabs.addClass('paragraphs-tabs-hide')}}};var switchActiveClass=function($parTabs,$clickedTab,$parWidget){var $clickedTabParent=$clickedTab.parent();$parTabs.find('li').removeClass('is-active');$parTabs.find('li').find('a').removeClass('is-active');$clickedTabParent.addClass('is-active');$clickedTabParent.find('a').addClass('is-active');$parWidget.removeClass('behavior-active content-active');if($clickedTabParent.hasClass('paragraphs_content_tab')){$parWidget.addClass('content-active');$parWidget.find('.paragraphs-add-wrapper').parent().removeClass('hidden')}else{$parWidget.addClass('behavior-active');$parWidget.find('.paragraphs-add-wrapper').parent().addClass('hidden')}};var markFirstVisibleParagraph=function(totalTopOffset){var $window=$(window);var bottomOfScreen=$window.scrollTop()+$window.height();var topOfScreen=$window.scrollTop()+totalTopOffset;var $firstParagraph=!1;var $allParagraphs=$('.node-form .draggable');$allParagraphs.each(function(){var $this=$(this);var topOfElement=$this.offset().top;var bottomOfElement=$this.offset().top+$this.height();if((bottomOfScreen>topOfElement)&&(topOfScreen<bottomOfElement)){if($firstParagraph){if(topOfElement>topOfScreen){$firstParagraph=$this;return!1}else if(topOfElement>bottomOfScreen){return!1}}
$firstParagraph=$this;if(topOfScreen<topOfElement){return!1}}});if($firstParagraph){$('.first-paragraph').removeClass('first-paragraph');$firstParagraph.addClass('first-paragraph paragraph-hover')}
return $firstParagraph};Drupal.behaviors.bodyTabs={attach:function(context){var $topLevelParWidgets=$('.paragraphs-tabs-wrapper',context).filter(function(){return $(this).parents('.paragraphs-nested').length===0});$(once('paragraphs-bodytabs',$topLevelParWidgets)).each(function(){var $parWidget=$(this);var $parTabs=$parWidget.find('.paragraphs-tabs');$parTabs.find('a').click(function(e){var toolbarHeight=$('.toolbar-tray-horizontal').outerHeight()||0;var adminToolbarsOffset=$('#toolbar-bar').outerHeight()+toolbarHeight;var totalTopOffset=adminToolbarsOffset+$('.paragraphs-tabs').outerHeight();var $firstParagraph;var currentParagraphOffset=0;var $window=$(window);$firstParagraph=markFirstVisibleParagraph(totalTopOffset);if($firstParagraph){currentParagraphOffset=$firstParagraph.offset().top-($window.scrollTop()+totalTopOffset);if(currentParagraphOffset<0){currentParagraphOffset=0}}
e.preventDefault();switchActiveClass($parTabs,$(this),$parWidget);if($firstParagraph){$('html, body').scrollTop($firstParagraph.offset().top-totalTopOffset-currentParagraphOffset);setTimeout(function(){$('.first-paragraph').removeClass('paragraph-hover')},1000)}})});if($('.paragraphs-tabs-wrapper',context).length>0){$topLevelParWidgets.each(function(){var $parWidget=$(this);var $parTabs=$parWidget.find('.paragraphs-tabs');var $parContent=$parWidget.find('.paragraphs-content');var $parBehavior=$parWidget.find('.paragraphs-behavior');var $mainRegion=$parWidget.find('.layout-region-node-main');setUpTab($parWidget,$parTabs,$parContent,$parBehavior,$mainRegion)})}}}})(jQuery,Drupal,once)