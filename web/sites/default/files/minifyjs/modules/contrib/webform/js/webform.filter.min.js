(function($,Drupal,debounce,once){Drupal.behaviors.webformFilterByText={attach:function(context,settings){$(once('webform-form-filter-text','input.webform-form-filter-text',context)).each(function(){var $input=$(this);$input.wrap('<div class="webform-form-filter"></div>');var $reset=$('<input class="webform-form-filter-reset" type="reset" title="Clear the search query." value="âœ•" style="display: none" />');$reset.insertAfter($input);var $table=$($input.data('element'));var $summary=$($input.data('summary'));var $noResults=$($input.data('no-results'));var $details=$table.closest('details');var $filterRows;var focusInput=$input.data('focus')||'true';var sourceSelector=$input.data('source')||'.webform-form-filter-text-source';var parentSelector=$input.data('parent')||'tr';var selectedSelector=$input.data('selected')||'';var hasDetails=$details.length;var totalItems;var args={'@item':$input.data('item-singular')||Drupal.t('item'),'@items':$input.data('item-plural')||Drupal.t('items'),'@total':null};if($table.length){$filterRows=$table.find(sourceSelector);var off=/chrom(e|ium)/.test(window.navigator.userAgent.toLowerCase())?'chrome-off-'+Math.floor(Math.random()*100000000):'off';$input.attr('autocomplete',off).on('keyup',debounce(filterElementList,200)).keyup();$reset.on('click',resetFilter);if(focusInput==='true'){setTimeout(function(){$input.trigger('focus')})}}
function resetFilter(e){$input.val('').keyup();$input.trigger('focus')}
function filterElementList(e){var query=$(e.target).val().toLowerCase();if(query.length>=2){totalItems=0;if($details.length){$details.hide()}
$filterRows.each(toggleEntry);Drupal.announce(Drupal.formatPlural(totalItems,'1 @item is available in the modified list.','@total @items are available in the modified list.',args))}else{totalItems=$filterRows.length;$filterRows.each(function(index){$(this).closest(parentSelector).show();if($details.length){$details.show()}})}
args['@total']=totalItems;$noResults[totalItems?'hide':'show']();$reset[query.length?'show':'hide']();if($summary.length){$summary.html(Drupal.formatPlural(totalItems,'1 @item','@total @items',args));$summary[totalItems?'show':'hide']()}
function toggleEntry(index,label){var $label=$(label);var $row=$label.closest(parentSelector);var textMatch=$label.text().toLowerCase().indexOf(query)!==-1;var isSelected=(selectedSelector&&$row.find(selectedSelector).length)?!0:!1;var isVisible=textMatch||isSelected;$row.toggle(isVisible);if(isVisible){totalItems++;if(hasDetails){$row.closest('details').show()}}}}})}}})(jQuery,Drupal,Drupal.debounce,once)