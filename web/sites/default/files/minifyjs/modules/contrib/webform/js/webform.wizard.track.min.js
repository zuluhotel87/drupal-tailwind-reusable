(function($,Drupal,once){Drupal.behaviors.webformWizardTrackPage={attach:function(context){if(window.history&&window.history.replaceState){var $form=$(context).hasData('webform-wizard-current-page')?$(context):$(context).find('[data-webform-wizard-current-page]');if($form.length&&$form.is(':visible')){var page=$form.attr('data-webform-wizard-current-page');var url=setUrlPageParameter(window.location.toString(),page);window.history.replaceState(null,null,url)}}
$(once('webform-wizard-page',$(':button[data-webform-wizard-page], :submit[data-webform-wizard-page]',context))).on('click',function(){var page=$(this).attr('data-webform-wizard-page');this.form.action=setUrlPageParameter(this.form.action,page)});function setUrlPageParameter(url,page){var regex=/([?&])page=[^?&]+/;if(url.match(regex)){return url.replace(regex,'$1page='+page)}else{return url+(url.indexOf('?')!==-1?'&page=':'?page=')+page}}}}})(jQuery,Drupal,once)