(function($,Drupal,once){Drupal.webform=Drupal.webform||{};Drupal.webform.locationGeocomplete=Drupal.webform.locationGeocomplete||{};Drupal.webform.locationGeocomplete.options=Drupal.webform.locationGeocomplete.options||{};Drupal.behaviors.webformLocationGeocomplete={attach:function(context){if(!$.fn.geocomplete){return}
$(once('webform-location-geocomplete','.js-webform-type-webform-location-geocomplete',context)).each(function(){var $element=$(this);var $input=$element.find('.webform-location-geocomplete');var $map=null;if($input.attr('data-webform-location-geocomplete-map')){$map=$('<div class="webform-location-geocomplete-map"><div class="webform-location-geocomplete-map--container"></div></div>').insertAfter($input).find('.webform-location-geocomplete-map--container')}
var options=$.extend({details:$element,detailsAttribute:'data-webform-location-geocomplete-attribute',types:['geocode'],map:$map,geocodeAfterResult:!1,restoreValueAfterBlur:!0,mapOptions:{disableDefaultUI:!0,zoomControl:!0}},Drupal.webform.locationGeocomplete.options);var $geocomplete=$input.geocomplete(options);var value=$geocomplete.val();if(value){$geocomplete.geocomplete('find',value)}else if(window.navigator.geolocation&&$geocomplete.attr('data-webform-location-geocomplete-geolocation')){window.navigator.geolocation.getCurrentPosition(function(position){$geocomplete.geocomplete('find',position.coords.latitude+', '+position.coords.longitude)})}})}}})(jQuery,Drupal,once)