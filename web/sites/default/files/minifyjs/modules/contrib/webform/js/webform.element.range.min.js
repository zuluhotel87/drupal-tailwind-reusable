(function($,Drupal,once){Drupal.behaviors.webformRangeOutputNumber={attach:function(context){$(once('webform-range-output-number','.js-form-type-range',context)).each(function(){var $element=$(this);var $input=$element.find('input[type="range"]');var $output=$element.find('input[type="number"]');if(!$output.length){return}
$output.val($input.val());$input.on('change input',function(){$output.val($input.val())});$output.on('change input',function(){$input.val($output.val())})})}};Drupal.behaviors.webformRangeOutputBubble={attach:function(context){$(once('webform-range-output-bubble','.js-form-type-range',context)).each(function(){var $element=$(this);var $input=$element.find('input[type="range"]');var $output=$element.find('output');var display=$output.attr('data-display');if(!$output.length){return}
$element.css('position','relative');$input.on('change input',function(){var inputValue=$input.val();var text=($output.attr('data-field-prefix')||'')+inputValue+($output.attr('data-field-suffix')||'');$output.text(text);var top;if(display==='above'){top=$input.position().top-$output.outerHeight()+2}else{top=$input.position().top+$input.outerHeight()+2}
var inputWidth=$input.outerWidth();var buttonPosition=Math.floor(inputWidth*(inputValue-$input.attr('min'))/($input.attr('max')-$input.attr('min')));var increment=Math.floor(inputWidth/5);var outputWidth=$output.outerWidth();var left;if(buttonPosition<=increment){left=0}else if(buttonPosition<=increment*2){left=(increment*1.5)-outputWidth;if(left<0){left=0}}else if(buttonPosition<=increment*3){left=(increment*2.5)-(outputWidth/2)}else if(buttonPosition<=increment*4){left=(increment*4)-outputWidth;if(left>(increment*5)-outputWidth){left=(increment*5)-outputWidth}}else if(buttonPosition<=inputWidth){left=(increment*5)-outputWidth}
left=Math.floor($input.position().left+left);$output.css({top:top,left:left})}).trigger('input');var defaultOpacity=$output.css('opacity');if(defaultOpacity<1){$input.on('focus mouseover',function(){$output.stop().fadeTo('slow',1)});$input.on('blur mouseout',function(){$output.stop().fadeTo('slow',defaultOpacity)});$output.on('touchstart mouseover',function(){$output.stop().fadeTo('slow',1)})}})}}})(jQuery,Drupal,once)