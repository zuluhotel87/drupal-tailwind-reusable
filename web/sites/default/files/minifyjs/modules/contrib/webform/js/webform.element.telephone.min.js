(function($,Drupal,drupalSettings,once){Drupal.webform=Drupal.webform||{};Drupal.webform.intlTelInput=Drupal.webform.intlTelInput||{};Drupal.webform.intlTelInput.options=Drupal.webform.intlTelInput.options||{};Drupal.behaviors.webformTelephoneInternational={attach:function(context){if(!$.fn.intlTelInput){return}
$(once('webform-telephone-international','input.js-webform-telephone-international',context)).each(function(){var $telephone=$(this);var $error=$('<strong class="error form-item--error-message">'+Drupal.t('Invalid phone number')+'</strong>').hide();$telephone.closest('.js-form-item').append($error);var options={utilsScript:drupalSettings.webform.intlTelInput.utilsScript,nationalMode:!1};if($telephone.attr('data-webform-telephone-international-initial-country')){options.initialCountry=$telephone.attr('data-webform-telephone-international-initial-country')}
if($telephone.attr('data-webform-telephone-international-preferred-countries')){options.preferredCountries=JSON.parse($telephone.attr('data-webform-telephone-international-preferred-countries'))}
options=$.extend(options,Drupal.webform.intlTelInput.options);$telephone.intlTelInput(options);var reset=function(){$telephone.removeClass('error');$error.hide()};var validate=function(){if($telephone.val().trim()){if(!$telephone.intlTelInput('isValidNumber')){$telephone.addClass('error');var placeholder=$telephone.attr('placeholder');var message;if(placeholder){message=Drupal.t('The phone number is not valid. (e.g. @example)',{'@example':placeholder})}else{message=Drupal.t('The phone number is not valid.')}
$error.html(message).show();return!1}}
return!0};$telephone.on('blur',function(){reset();validate()});$telephone.on('keyup change',reset);var $form=$(this.form);$form.on('submit',function(event){if(!validate()){$telephone.focus();event.preventDefault();if(Drupal.behaviors.webformSubmitOnce){Drupal.behaviors.webformSubmitOnce.clear()}}})})}}})(jQuery,Drupal,drupalSettings,once)