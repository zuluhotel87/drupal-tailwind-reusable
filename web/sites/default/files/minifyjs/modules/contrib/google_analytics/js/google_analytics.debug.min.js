(function($,Drupal,drupalSettings){'use strict';Drupal.google_analytics={};$(document).ready(function(){$(document.body).on('mousedown keyup touchstart',function(event){console.group('Running Google Analytics for Drupal.');console.info("Event '%s' has been detected.",event.type);$(event.target).closest('a,area').each(function(){console.info("Closest element '%o' has been found. URL '%s' extracted.",this,this.href);if(Drupal.google_analytics.isInternal(this.href)){if($(this).is('.colorbox')&&(drupalSettings.google_analytics.trackColorbox)){console.info('Click on .colorbox item has been detected.')}else if(drupalSettings.google_analytics.trackDownload&&Drupal.google_analytics.isDownload(this.href)){console.info("Download url '%s' has been found. Tracked download as extension '%s'.",Drupal.google_analytics.getPageUrl(this.href),Drupal.google_analytics.getDownloadExtension(this.href).toUpperCase());gtag('event',Drupal.google_analytics.getDownloadExtension(this.href).toUpperCase(),{event_category:'Downloads',event_label:Drupal.google_analytics.getPageUrl(this.href),transport_type:'beacon'})}else if(Drupal.google_analytics.isInternalSpecial(this.href)){console.info("Click on internal special link '%s' has been tracked.",Drupal.google_analytics.getPageUrl(this.href));gtag('config',drupalSettings.google_analytics.account,{page_path:Drupal.google_analytics.getPageUrl(this.href),transport_type:'beacon'})}else{console.info("Click on internal link '%s' detected, but not tracked by click.",this.href)}}else{if(drupalSettings.google_analytics.trackMailto&&$(this).is("a[href^='mailto:'],area[href^='mailto:']")){console.info("Click on e-mail '%s' has been tracked.",this.href.substring(7));gtag('event','Click',{event_category:'Mails',event_label:this.href.substring(7),transport_type:'beacon'})}else if(drupalSettings.google_analytics.trackTel&&$(this).is("a[href^='tel:'],area[href^='tel:']")){console.info("Click on telephone number '%s' has been tracked.",this.href.substring(4));gtag('event','Click',{event_category:'Telephone calls',event_label:this.href.substring(4),transport_type:'beacon'})}else if(drupalSettings.google_analytics.trackOutbound&&this.href.match(/^\w+:\/\//i)){if(drupalSettings.google_analytics.trackDomainMode!==2||(drupalSettings.google_analytics.trackDomainMode===2&&!Drupal.google_analytics.isCrossDomain(this.hostname,drupalSettings.google_analytics.trackCrossDomains))){console.info("Outbound link '%s' has been tracked.",this.href);gtag('event','Click',{event_category:'Outbound links',event_label:this.href,transport_type:'beacon'})}else{console.info("Internal link '%s' clicked, not tracked.",this.href)}}}});console.groupEnd()});if(drupalSettings.google_analytics.trackUrlFragments){window.onhashchange=function(){console.info("Track URL '%s' as pageview. Hash '%s' has changed.",location.pathname+location.search+location.hash,location.hash);gtag('config',drupalSettings.google_analytics.account,{page_path:location.pathname+location.search+location.hash})}}
if(drupalSettings.google_analytics.trackColorbox){$(document).on('cbox_complete',function(){var href=$.colorbox.element().attr('href');if(href){console.info("Colorbox transition to url '%s' has been tracked.",Drupal.google_analytics.getPageUrl(href));gtag('config',drupalSettings.google_analytics.account,{page_path:Drupal.google_analytics.getPageUrl(href)})}})}});Drupal.google_analytics.isCrossDomain=function(hostname,crossDomains){return $.inArray(hostname,crossDomains)>-1?!0:!1};Drupal.google_analytics.isDownload=function(url){var isDownload=new RegExp('\\.('+drupalSettings.google_analytics.trackDownloadExtensions+')([\?#].*)?$','i');return isDownload.test(url)};Drupal.google_analytics.isInternal=function(url){var isInternal=new RegExp('^(https?):\/\/'+window.location.host,'i');return isInternal.test(url)};Drupal.google_analytics.isInternalSpecial=function(url){var isInternalSpecial=new RegExp('(\/go\/.*)$','i');return isInternalSpecial.test(url)};Drupal.google_analytics.getPageUrl=function(url){var extractInternalUrl=new RegExp('^(https?):\/\/'+window.location.host,'i');return url.replace(extractInternalUrl,'')};Drupal.google_analytics.getDownloadExtension=function(url){var extractDownloadextension=new RegExp('\\.('+drupalSettings.google_analytics.trackDownloadExtensions+')([\?#].*)?$','i');var extension=extractDownloadextension.exec(url);return(extension===null)?'':extension[1]}})(jQuery,Drupal,drupalSettings)