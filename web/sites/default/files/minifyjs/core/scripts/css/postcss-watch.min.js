'use strict';const{watch}=require('chokidar');const{stat,unlink}=require('node:fs');const changeOrAdded=require('./changeOrAdded');const log=require('./log');const watcher=watch(['./themes','./modules','./profiles'],{ignoreInitial:!0,ignored:(filePath,stats)=>stats?.isFile()&&!filePath.endsWith('.pcss.css')||filePath.includes('node_modules'),usePolling:!0,});const unlinkHandler=(err)=>{if(err){log(err)}};watcher.on('add',changeOrAdded).on('change',changeOrAdded).on('unlink',(filePath)=>{const fileName=filePath.slice(0,-9);stat(`${fileName}.css`,(err)=>{if(!err){unlink(`${fileName}.css`,unlinkHandler)}})}).on('ready',()=>log(`Watching '**/*.pcss.css' for changes.`))