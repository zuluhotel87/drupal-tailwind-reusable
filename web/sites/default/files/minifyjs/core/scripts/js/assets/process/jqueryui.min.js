const Terser=require('terser');const path=require('node:path');module.exports=async({file:{from,to},contents})=>{const filename=`${to.slice(0, -3)}-min.js`;const sourcemap=`${filename}.map`;const{code,map}=await Terser.minify({[path.basename(from)]:contents},{sourceMap:{filename:path.basename(filename),url:path.basename(sourcemap),},});return[{filename:to,contents},{filename,contents:code},{filename:sourcemap,contents:map},]}