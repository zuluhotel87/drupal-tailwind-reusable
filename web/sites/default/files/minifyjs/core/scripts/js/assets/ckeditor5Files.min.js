const{globSync}=require('glob');const ckeditor5PluginMapping={'block-quote':'blockquote',essentials:'internal','basic-styles':'basic',};module.exports=(packageFolder)=>{const fileList=[];const ckeditor5Dirs=globSync(`{${packageFolder}/@ckeditor/ckeditor5*,${packageFolder}/ckeditor5}`).sort();for(const ckeditor5package of ckeditor5Dirs){const buildFiles=globSync(`${ckeditor5package}/build/**/*.js`,{nodir:!0,});if(buildFiles.length){const pack=ckeditor5package.replace(`${packageFolder}/`,'');let pluginName=pack.replace('@ckeditor/ckeditor5-','');let folder=`ckeditor5/${pluginName.replace('@ckeditor/ckeditor5-', '')}`;let library=pluginName.replace(/-./g,(match)=>match[1].toUpperCase());if(ckeditor5PluginMapping.hasOwnProperty(pluginName)){library=ckeditor5PluginMapping[pluginName]}
if(library==='ckeditor5'){folder='ckeditor5/ckeditor5-dll'}else{library=`ckeditor5.${library}`}
fileList.push({pack,library,folder,files:buildFiles.map((absolutePath)=>({from:absolutePath.replace(`${ckeditor5package}/`,''),to:absolutePath.replace(`${ckeditor5package}/build/`,''),})),})}}
return fileList}