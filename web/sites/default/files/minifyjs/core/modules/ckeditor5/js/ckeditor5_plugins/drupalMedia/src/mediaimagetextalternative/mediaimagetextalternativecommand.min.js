import{Command}from 'ckeditor5/src/core';import{getClosestSelectedDrupalMediaElement}from '../utils';import{METADATA_ERROR}from './utils';export default class MediaImageTextAlternativeCommand extends Command{refresh(){const drupalMediaElement=getClosestSelectedDrupalMediaElement(this.editor.model.document.selection,);this.isEnabled=!!drupalMediaElement&&drupalMediaElement.getAttribute('drupalMediaIsImage')&&drupalMediaElement.getAttribute('drupalMediaIsImage')!==METADATA_ERROR;if(this.isEnabled){this.value=drupalMediaElement.getAttribute('drupalMediaAlt')}else{this.value=!1}}
execute(options){const{model}=this.editor;const drupalMediaElement=getClosestSelectedDrupalMediaElement(model.document.selection,);options.newValue=options.newValue.trim();model.change((writer)=>{if(options.newValue.length>0){writer.setAttribute('drupalMediaAlt',options.newValue,drupalMediaElement,)}else{writer.removeAttribute('drupalMediaAlt',drupalMediaElement)}})}}