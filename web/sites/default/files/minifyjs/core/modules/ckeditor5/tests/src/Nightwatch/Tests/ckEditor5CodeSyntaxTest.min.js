module.exports={'@tags':['core','ckeditor5'],before(browser){browser.drupalInstall({installProfile:'testing'})},after(browser){browser.drupalUninstall()},'Verify code block configured languages are respected':(browser)=>{browser.drupalLoginAsAdmin(()=>{browser.drupalRelativeURL('/admin/modules').click('[name="modules[ckeditor5][enable]"]').click('[name="modules[node][enable]"]').click('[name="modules[field_ui][enable]"]').submitForm('input[type="submit"]').waitForElementVisible('.system-modules-confirm-form input[value="Continue"]',).submitForm('input[value="Continue"]').waitForElementVisible('.system-modules',10000).drupalRelativeURL('/admin/config/content/formats/add').waitForElementVisible('[data-drupal-selector="edit-name"]').updateValue('[data-drupal-selector="edit-name"]','test').waitForElementVisible('#edit-name-machine-name-suffix').click('[data-drupal-selector="edit-editor-editor"] option[value=ckeditor5]',).waitForElementVisible('[data-drupal-selector="edit-editor-settings-toolbar"]',).click('.ckeditor5-toolbar-button-sourceEditing').perform(function(){return this.actions().sendKeys(browser.Keys.ARROW_DOWN)}).waitForElementVisible('[href*=edit-editor-settings-plugins-ckeditor5-sourceediting]',).click('.ckeditor5-toolbar-item-codeBlock').perform(function(){return this.actions().sendKeys(browser.Keys.ARROW_DOWN)}).waitForElementVisible('[href*=edit-editor-settings-plugins-ckeditor5-codeblock]',).click('[href*=edit-editor-settings-plugins-ckeditor5-codeblock]').setValue('[data-drupal-selector="edit-editor-settings-plugins-ckeditor5-codeblock-languages"]','twig|Twig\nyml|YML',).submitForm('input[type="submit"]').waitForElementVisible('[data-drupal-messages]').assert.textContains('[data-drupal-messages]','Added text format').drupalRelativeURL('/admin/structure/types/add').waitForElementVisible('[data-drupal-selector="edit-name"]').updateValue('[data-drupal-selector="edit-name"]','test').waitForElementVisible('#edit-name-machine-name-suffix').submitForm('input[type="submit"]').waitForElementVisible('[data-drupal-messages]').assert.textContains('[data-drupal-messages]','The content type test has been added',).drupalRelativeURL('/node/add/test').waitForElementVisible('.ck-editor__editable').click('.ck-code-block-dropdown .ck-dropdown__button .ck-splitbutton__arrow',).assert.textContains('.ck-code-block-dropdown .ck-dropdown__panel .ck-list__item:nth-child(1) .ck-button__label','Twig',).assert.textContains('.ck-code-block-dropdown .ck-dropdown__panel .ck-list__item:nth-child(2) .ck-button__label','YML',).click('.ck-code-block-dropdown .ck-dropdown__panel .ck-list__item:nth-child(1) button',).waitForElementVisible('.ck-editor__main pre[data-language="Twig"]').perform(function(){return this.actions().sendKeys('x')}).pause(50).click('.ck-source-editing-button').waitForElementVisible('.ck-source-editing-area').assert.valueContains('.ck-source-editing-area textarea','<pre><code class="language-twig">',).click('.ck-source-editing-button').waitForElementVisible('.ck-editor__editable:not(.ck-hidden)').perform(function(){return this.actions().sendKeys(browser.Keys.ARROW_RIGHT)}).pause(50).perform(function(){return this.actions().sendKeys(browser.Keys.ENTER)}).pause(50).perform(function(){return this.actions().sendKeys(browser.Keys.ENTER)}).pause(50).perform(function(){return this.actions().sendKeys(browser.Keys.ENTER)}).pause(50).click('.ck-code-block-dropdown .ck-dropdown__button .ck-splitbutton__arrow',).click('.ck-code-block-dropdown .ck-dropdown__panel .ck-list__item:nth-child(2) button',).perform(function(){return this.actions().sendKeys('x')}).click('.ck-source-editing-button').waitForElementVisible('.ck-source-editing-area').assert.valueContains('.ck-source-editing-area textarea','<pre><code class="language-yml">',)})},}