const POPOVER_OPEN_DELAY=150;const POPOVER_CLOSE_DELAY=400;const POPOVER_NO_CLICK_DELAY=500;((Drupal,once)=>{Drupal.behaviors.navigationProcessPopovers={attach:(context)=>{once('toolbar-popover',context.querySelectorAll('[data-toolbar-popover]'),).forEach((popover)=>{const button=popover.querySelector('[data-toolbar-popover-control]');const tooltip=popover.querySelector('[data-toolbar-popover-wrapper]');if(!button||!tooltip)return;const expandPopover=()=>{popover.classList.add('toolbar-popover--expanded');button.dataset.drupalNoClick='true';tooltip.removeAttribute('inert');setTimeout(()=>{delete button.dataset.drupalNoClick},POPOVER_NO_CLICK_DELAY)};const collapsePopover=()=>{popover.classList.remove('toolbar-popover--expanded');tooltip.setAttribute('inert',!0);delete button.dataset.drupalNoClick};const toggleState=(state,initialLoad=!1)=>{state&&!initialLoad?expandPopover():collapsePopover();button.setAttribute('aria-expanded',state&&!initialLoad);const text=button.querySelector('[data-toolbar-action]');if(text){text.textContent=state?Drupal.t('Collapse'):Drupal.t('Extend')}
popover.dispatchEvent(new CustomEvent('toolbar-popover-toggled',{bubbles:!0,detail:{state,},}),)};const isPopoverHoverOrFocus=()=>popover.contains(document.activeElement)||popover.matches(':hover');const delayedClose=()=>{setTimeout(()=>{if(isPopoverHoverOrFocus())return;close()},POPOVER_CLOSE_DELAY)};const open=()=>{['mouseleave','focusout'].forEach((e)=>{button.addEventListener(e,delayedClose,!1);tooltip.addEventListener(e,delayedClose,!1)})};const close=()=>{toggleState(!1);['mouseleave','focusout'].forEach((e)=>{button.removeEventListener(e,delayedClose);tooltip.removeEventListener(e,delayedClose)})};button.addEventListener('mouseover',()=>{if(window.matchMedia('(max-width: 1023px)').matches){return}
setTimeout(()=>{if(!button.matches(':hover')||!button.getAttribute('aria-expanded')==='false'){return}
toggleState(!0);open()},POPOVER_OPEN_DELAY)});button.addEventListener('click',(e)=>{const state=e.currentTarget.getAttribute('aria-expanded')==='false';if(!e.currentTarget.dataset.drupalNoClick){toggleState(state)}});popover.addEventListener('toolbar-popover-close',()=>{close()});popover.addEventListener('toolbar-popover-open',()=>{toggleState(!0)});popover.addEventListener('toolbar-active-url',()=>{toggleState(!0,!0)})})},}})(Drupal,once)