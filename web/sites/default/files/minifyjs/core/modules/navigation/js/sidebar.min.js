((Drupal,once)=>{Drupal.behaviors.navigation={attach(context){once('navigation','.admin-toolbar',context).forEach((sidebar)=>{const backButton=sidebar.querySelector('[data-toolbar-back-control]',);if(!backButton){return}
const buttons=sidebar.querySelectorAll('[data-toolbar-menu-trigger]',);const tooltips=sidebar.querySelectorAll('[data-drupal-tooltip]');const closeButtons=()=>{buttons.forEach((button)=>{button.dispatchEvent(new CustomEvent('toolbar-menu-set-toggle',{detail:{state:!1,},}),)})};const closePopovers=(current=!1)=>{sidebar.querySelectorAll('[data-toolbar-popover]').forEach((popover)=>{if(current&&current instanceof Element&&popover.isEqualNode(current)){return}
popover.dispatchEvent(new CustomEvent('toolbar-popover-close',{}),)})};sidebar.addEventListener('click',(e)=>{if(e.target.matches('button, button *')){e.target.closest('button').focus()}});sidebar.addEventListener('toggle-admin-toolbar-content',(e)=>{if(!e.detail.state){closePopovers()}});sidebar.addEventListener('toolbar-popover-toggled',(e)=>{if(e.detail.state){closeButtons();closePopovers(e.target)}});sidebar.addEventListener('toolbar-menu-toggled',(e)=>{if(e.detail.state){const targetLevel=e.detail.level;buttons.forEach((button)=>{const buttonLevel=button.dataset.toolbarMenuTrigger;if(!button.isEqualNode(e.target)&&+buttonLevel===+targetLevel){button.dispatchEvent(new CustomEvent('toolbar-menu-set-toggle',{detail:{state:!1,},}),)}})}});backButton.addEventListener('click',closePopovers);tooltips.forEach((tooltip)=>{['mouseover','focus'].forEach((e)=>{tooltip.addEventListener(e,closePopovers)})})})},}})(Drupal,once)