((Drupal)=>{const{isDesktopNav}=Drupal.olivero;const secondLevelNavMenus=document.querySelectorAll('[data-drupal-selector="primary-nav-menu-item-has-children"]',);function toggleSubNav(topLevelMenuItem,toState){const buttonSelector='[data-drupal-selector="primary-nav-submenu-toggle-button"]';const button=topLevelMenuItem.querySelector(buttonSelector);const state=toState!==undefined?toState:button.getAttribute('aria-expanded')!=='true';if(state){if(isDesktopNav()){secondLevelNavMenus.forEach((el)=>{el.querySelector(buttonSelector).setAttribute('aria-expanded','false',);el.querySelector('[data-drupal-selector="primary-nav-menu--level-2"]',).classList.remove('is-active-menu-parent');el.querySelector('[data-drupal-selector="primary-nav-menu-ðŸ¥•"]',).classList.remove('is-active-menu-parent')})}}else{topLevelMenuItem.classList.remove('is-touch-event')}
button.setAttribute('aria-expanded',state);topLevelMenuItem.querySelector('[data-drupal-selector="primary-nav-menu--level-2"]').classList.toggle('is-active-menu-parent',state);topLevelMenuItem.querySelector('[data-drupal-selector="primary-nav-menu-ðŸ¥•"]').classList.toggle('is-active-menu-parent',state)}
Drupal.olivero.toggleSubNav=toggleSubNav;function handleBlur(e){if(!Drupal.olivero.isDesktopNav())return;setTimeout(()=>{const menuParentItem=e.target.closest('[data-drupal-selector="primary-nav-menu-item-has-children"]',);if(!menuParentItem.contains(document.activeElement)){toggleSubNav(menuParentItem,!1)}},200)}
secondLevelNavMenus.forEach((el)=>{const button=el.querySelector('[data-drupal-selector="primary-nav-submenu-toggle-button"]',);button.removeAttribute('aria-hidden');button.removeAttribute('tabindex');el.addEventListener('touchstart',()=>{el.classList.add('is-touch-event')},{passive:!0},);el.addEventListener('mouseover',()=>{if(isDesktopNav()&&!el.classList.contains('is-touch-event')){el.classList.add('is-active-mouseover-event');toggleSubNav(el,!0);setTimeout(()=>{el.classList.remove('is-active-mouseover-event')},500)}});button.addEventListener('click',()=>{if(!el.classList.contains('is-active-mouseover-event')){toggleSubNav(el)}});el.addEventListener('mouseout',()=>{if(isDesktopNav()&&!document.activeElement.matches('[aria-expanded="true"], .is-active-menu-parent *',)){toggleSubNav(el,!1)}});el.addEventListener('blur',handleBlur,!0)});function closeAllSubNav(){secondLevelNavMenus.forEach((el)=>{if(el.contains(document.activeElement)){el.querySelector('[data-drupal-selector="primary-nav-submenu-toggle-button"]',).focus()}
toggleSubNav(el,!1)})}
Drupal.olivero.closeAllSubNav=closeAllSubNav;function areAnySubNavsOpen(){let subNavsAreOpen=!1;secondLevelNavMenus.forEach((el)=>{const button=el.querySelector('[data-drupal-selector="primary-nav-submenu-toggle-button"]',);const state=button.getAttribute('aria-expanded')==='true';if(state){subNavsAreOpen=!0}});return subNavsAreOpen}
Drupal.olivero.areAnySubNavsOpen=areAnySubNavsOpen;document.addEventListener('keyup',(e)=>{if(e.key==='Escape'){if(isDesktopNav())closeAllSubNav();}});document.addEventListener('touchstart',(e)=>{if(areAnySubNavsOpen()&&!e.target.matches('[data-drupal-selector="header-nav"], [data-drupal-selector="header-nav"] *',)){closeAllSubNav()}},{passive:!0},)})(Drupal)