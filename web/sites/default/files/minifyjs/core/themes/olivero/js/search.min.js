((Drupal)=>{const searchWideButtonSelector='[data-drupal-selector="block-search-wide-button"]';const searchWideButton=document.querySelector(searchWideButtonSelector);const searchWideWrapperSelector='[data-drupal-selector="block-search-wide-wrapper"]';const searchWideWrapper=document.querySelector(searchWideWrapperSelector);function searchIsVisible(){return searchWideWrapper.classList.contains('is-active')}
Drupal.olivero.searchIsVisible=searchIsVisible;function watchForClickOut(e){const clickInSearchArea=e.target.matches(`
      ${searchWideWrapperSelector},
      ${searchWideWrapperSelector} *,
      ${searchWideButtonSelector},
      ${searchWideButtonSelector} *
    `);if(!clickInSearchArea&&searchIsVisible()){toggleSearchVisibility(!1)}}
function watchForFocusOut(e){if(e.relatedTarget){const inSearchBar=e.relatedTarget.matches(`${searchWideWrapperSelector}, ${searchWideWrapperSelector} *`,);const inSearchButton=e.relatedTarget.matches(`${searchWideButtonSelector}, ${searchWideButtonSelector} *`,);if(!inSearchBar&&!inSearchButton){toggleSearchVisibility(!1)}}}
function watchForEscapeOut(e){if(e.key==='Escape'){toggleSearchVisibility(!1)}}
function handleFocus(){if(searchIsVisible()){searchWideWrapper.querySelector('input[type="search"]').focus()}else if(searchWideWrapper.contains(document.activeElement)){searchWideButton.focus()}}
function toggleSearchVisibility(visibility){searchWideButton.setAttribute('aria-expanded',visibility===!0);searchWideWrapper.classList.toggle('is-active',visibility===!0);searchWideWrapper.addEventListener('transitionend',handleFocus,{once:!0,});if(visibility===!0){Drupal.olivero.closeAllSubNav();document.addEventListener('click',watchForClickOut,{capture:!0});document.addEventListener('focusout',watchForFocusOut,{capture:!0,});document.addEventListener('keyup',watchForEscapeOut,{capture:!0})}else{document.removeEventListener('click',watchForClickOut,{capture:!0,});document.removeEventListener('focusout',watchForFocusOut,{capture:!0,});document.removeEventListener('keyup',watchForEscapeOut,{capture:!0,})}}
Drupal.olivero.toggleSearchVisibility=toggleSearchVisibility;Drupal.behaviors.searchWide={attach(context){const searchWideButtonEl=once('search-wide',searchWideButtonSelector,context,).shift();if(searchWideButtonEl){searchWideButtonEl.setAttribute('aria-expanded',searchIsVisible());searchWideButtonEl.addEventListener('click',()=>{toggleSearchVisibility(!searchIsVisible())})}},}})(Drupal)