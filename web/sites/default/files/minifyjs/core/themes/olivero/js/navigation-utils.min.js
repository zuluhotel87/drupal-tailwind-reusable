((Drupal)=>{Drupal.olivero={};function isDesktopNav(){const navButtons=document.querySelector('[data-drupal-selector="mobile-buttons"]',);return navButtons?window.getComputedStyle(navButtons).getPropertyValue('display')==='none':!1}
Drupal.olivero.isDesktopNav=isDesktopNav;const stickyHeaderToggleButton=document.querySelector('[data-drupal-selector="sticky-header-toggle"]',);const siteHeaderFixable=document.querySelector('[data-drupal-selector="site-header-fixable"]',);function stickyHeaderIsEnabled(){return stickyHeaderToggleButton.getAttribute('aria-checked')==='true'}
function setStickyHeaderStorage(expandedState){if(!expandedState){localStorage.removeItem('Drupal.olivero.stickyHeaderState');return}
const now=new Date();const item={value:expandedState,expiry:now.getTime()+20160000,};localStorage.setItem('Drupal.olivero.stickyHeaderState',JSON.stringify(item),)}
function updateStickyHeaderStorage(expandedState){const stickyHeaderState=localStorage.getItem('Drupal.olivero.stickyHeaderState',);if(stickyHeaderState!==null){setStickyHeaderStorage(expandedState)}}
function toggleStickyHeaderState(pinnedState){if(isDesktopNav()){siteHeaderFixable.classList.toggle('is-expanded',pinnedState);stickyHeaderToggleButton.setAttribute('aria-checked',pinnedState)}}
function getStickyHeaderStorage(){const stickyHeaderState=localStorage.getItem('Drupal.olivero.stickyHeaderState',);if(!stickyHeaderState)return!1;const item=JSON.parse(stickyHeaderState);const now=new Date();if(now.getTime()>item.expiry){localStorage.removeItem('Drupal.olivero.stickyHeaderState');return!1}
return item.value}
if('IntersectionObserver' in window&&'IntersectionObserverEntry' in window&&'intersectionRatio' in window.IntersectionObserverEntry.prototype){const fixableElements=document.querySelectorAll('[data-drupal-selector="site-header-fixable"], [data-drupal-selector="social-bar-inner"]',);function toggleDesktopNavVisibility(entries){if(!isDesktopNav())return;entries.forEach((entry)=>{fixableElements.forEach((el)=>el.classList.toggle('is-fixed',entry.intersectionRatio<1),)})}
function getRootMargin(){let rootMarginTop=72;const{body}=document;if(body.classList.contains('toolbar-fixed')){rootMarginTop-=39}
if(body.classList.contains('toolbar-horizontal')&&body.classList.contains('toolbar-tray-open')){rootMarginTop-=40}
return `${rootMarginTop}px 0px 0px 0px`}
function monitorNavPosition(){const primaryNav=document.querySelector('[data-drupal-selector="site-header"]',);const options={rootMargin:getRootMargin(),threshold:[0.999,1],};const observer=new IntersectionObserver(toggleDesktopNavVisibility,options,);if(primaryNav){observer.observe(primaryNav)}}
if(stickyHeaderToggleButton){stickyHeaderToggleButton.addEventListener('click',()=>{const pinnedState=!stickyHeaderIsEnabled();toggleStickyHeaderState(pinnedState);setStickyHeaderStorage(pinnedState)})}
const siteHeaderInner=document.querySelector('[data-drupal-selector="site-header-inner"]',);if(siteHeaderInner){siteHeaderInner.addEventListener('focusin',()=>{if(isDesktopNav()&&!stickyHeaderIsEnabled()){const header=document.querySelector('[data-drupal-selector="site-header"]',);const headerNav=header.querySelector('[data-drupal-selector="header-nav"]',);const headerMargin=header.clientHeight-headerNav.clientHeight;if(window.scrollY>headerMargin){window.scrollTo(0,headerMargin)}}})}
monitorNavPosition();updateStickyHeaderStorage(getStickyHeaderStorage());toggleStickyHeaderState(getStickyHeaderStorage())}})(Drupal)